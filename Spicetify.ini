[Rainmeter]
Update = 1000

[Variables]
Main_FG =00FF9C
Secondary_FG =DEDEDE
Main_BG =2E2837
Sidebar_And_Player_BG =2E2837
Cover_Overlay_And_Shadow =000000
Indicator_FG_And_Button_BG =00FF9C
Pressing_FG = FF5C86
Slider_BG =3F3C45
Sidebar_Indicator_And_Hover_Button_BG =00BF76
Scrollbar_FG_And_Selected_Row_BG =615670
Pressing_Button_FG =DEDEDE
Pressing_Button_BG =383145
Selected_Button =00BF76
Miscellaneous_BG =3F3C45
Miscellaneous_Hover_BG =383145
Preserve_1 =FFFFFF

Replace_Colors =1
Hide_Ads =1
Inject_CSS =1

[Backup]
Measure = Plugin
Plugin = RunCommand
Parameter = xcopy "%appdata%\Spotify\Apps" "#@#Backup" /y
OutputType = ANSI
FinishAction = !CommandMeasure Script "Init_Unzip()"

[Restore]
Measure = Plugin
Plugin = RunCommand
Parameter = robocopy "#@#Backup" "%appdata%\Spotify\Apps"
OutputType = ANSI
FinishAction = [!CommandMeasure Script "status='Restore succeeded'"]["#@#AutoRestart.exe"]

[ClearBackup]
Measure = Plugin
Plugin = RunCommand
Parameter = RD "#@#Backup" /S /Q
OutputType = ANSI
FinishAction = [!CommandMeasure ClearBackup2 "Run"][!CommandMeasure Script "status='Backup cleared'"]

[ClearBackup2]
Measure = Plugin
Plugin = RunCommand
Parameter = RD "#@#Extracted" /S /Q
OutputType = ANSI
FinishAction = [!Refresh]

[Unzip]
Measure = Plugin
Plugin = RunCommand
Program = "#@#7z.exe"
StartInFolder = #@#
OutputType = ANSI
DynamicVariables = 1
FinishAction = !CommandMeasure "Script" "DuplicateExtracted()"

[Duplicate]
Measure = Plugin
Plugin = RunCommand
OutputType = ANSI
StartInFolder = #@#Extracted
FinishAction = !CommandMeasure "Script" "Init_PrepareCSS()"

[Zip]
Measure = Plugin
Plugin = RunCommand
Program = "#@#7z.exe"
StartInFolder = #@#Decomp
OutputType = ANSI
DynamicVariables = 1
FinishAction = !CommandMeasure "Remove" "Run"

[Remove]
Measure = Plugin
Plugin = RunCommand
Parameter = "del #@#Decomp\css /Q"
OutputType = ANSI
FinishAction = !CommandMeasure "Script" "ModSpa()"

[Replicate]
Measure = Plugin
Plugin = RunCommand
OutputType = ANSI
StartInFolder = #@#
FinishAction = !CommandMeasure Script "StartCSS()"

[FileView]
Measure = Plugin
Plugin = FileView
Path = #@#Backup
ShowDotDot = 0
ShowFolder = 0
FinishAction = !CommandMeasure Script "UpdateInitStatus()"

[FileCount]
Measure = Plugin
Plugin = FileView
Path = [FileView]
Type = FileCount

[FileName]
Measure = Plugin
Plugin = FileView
Path = [FileView]
Type = FileName
Index = 1
IgnoreCount = 1

[Script]
Measure = Script
ScriptFile = #@#Script.lua

[CSSFileView]
Measure = Plugin
Plugin = FileView
ShowDotDot = 0

[CSSFileName]
Measure = Plugin
Plugin = FileView
Path = [CSSFileView]
Type = FilePath
Index = 1
IgnoreCount = 1


[Background]
Meter = Shape
Shape = Rectangle 10,10,600,660,5 | StrokeWidth 0 | Fill Color f7f9f9

[ReplaceColorsMeasure]
Measure = Calc
IfCondition = #Replace_Colors# = 1
IfTrueAction = [!SetOption ReplaceColorsToggle Prefix "[\xf14a] Replace colors"]
IfFalseAction = [!SetOption ReplaceColorsToggle Prefix "[\xf0c8] Replace colors"][!SetOptionGroup ColorBox Color "Fill Color 909090"][!SetOptionGroup ColorBox LeftMouseUpAction ""][!SetOptionGroup ColorBoxText FontColor "909090"]

[ReplaceColorsToggle]
Meter = String
Text =
InlinePattern = ^(.)
InlineSetting = Face | Font Awesome 5 Free
FontFace = Bahnschrift
FOntSize = 13
FontColor = 282828
X = 30
Y = 30
AntiAlias = 1
LeftMouseUpAction = [!WriteKeyValue Variables Replace_Colors "(1 - #Replace_Colors#)"][!Refresh]

[ButtonStyle]
Y = 610
Shape = Rectangle 0,0,120,40,20 | StrokeWidth 1.25 | Stroke Color 8a4fff | Extend Color
Color = Fill Color 00000000
MouseOverAction = [!SetOption #CURRENTSECTION# Color "Fill Color 8a4fff"][!UpdateMeter #CURRENTSECTION#][!SetOption #CURRENTSECTION#Text FontColor f7f9f9][!UpdateMeter #CURRENTSECTION#Text][!Redraw]
MouseLeaveAction = [!SetOption #CURRENTSECTION# Color "Fill Color 00000000"][!UpdateMeter #CURRENTSECTION#][!SetOption #CURRENTSECTION#Text FontColor 8a4fff][!UpdateMeter #CURRENTSECTION#Text][!Redraw]
HIdden = 1

[ButtonTextStyle]
FontFace = Bahnschrift
FontWeight = 600
FontSize = 14
StringAlign = CenterCenter
X = 60r
Y = 631
AntiAlias = 1
FontColor = 8a4fff
HIdden = 1

[BackupButton]
Meter = Shape
MeterStyle = ButtonStyle
X = 30
LeftMouseUpAction = !CommandMeasure "Backup" "Run"
Group = BackupButton

[BackupButtonText]
Meter = String
MeterStyle = ButtonTextStyle
Text = Backup
Group = BackupButton

[RestoreButton]
Meter = Shape
MeterStyle = ButtonStyle
X = 30
LeftMouseUpAction = !CommandMeasure "Restore" "Run"
Group = BackupButton_Disabled

[RestoreButtonText]
Meter = String
MeterStyle = ButtonTextStyle
Text = Restore
Group = BackupButton_Disabled

[ClearBackupButton]
Meter = Shape
MeterStyle = ButtonStyle
X = 170
Shape = Rectangle 0,0,135,40,20 | StrokeWidth 1.25 | Stroke Color FF3030 | Extend Color
MouseOverAction = [!SetOption #CURRENTSECTION# Color "Fill Color FF3030  "][!UpdateMeter #CURRENTSECTION#][!SetOption #CURRENTSECTION#Text FontColor f7f9f9][!UpdateMeter #CURRENTSECTION#Text][!HideMeterGroup PopupClearBackup][!ShowMeterGroup PopupClearBackup][!Redraw]
MouseLeaveAction = [!SetOption #CURRENTSECTION# Color "Fill Color 00000000"][!UpdateMeter #CURRENTSECTION#][!SetOption #CURRENTSECTION#Text FontColor FF3030][!UpdateMeter #CURRENTSECTION#Text][!HideMeterGroup PopupClearBackup][!HideMeterGroup PopupClearBackup][!Redraw]
LeftMouseUpAction = !CommandMeasure "ClearBackup" "Run"
Group = BackupButton_Disabled

[ClearBackupButtonText]
Meter = String
MeterStyle = ButtonTextStyle
Text = Clear backup
X = 67.5r
FontColor = FF3030
Group = BackupButton_Disabled

[EditCSSButton]
Meter = Shape
MeterStyle = ButtonStyle
X = 330
LeftMouseUpAction = ["#@#user.css"]
Group =
Hidden = 0

[EditCSSButtonText]
Meter = String
MeterStyle = ButtonTextStyle
Text = Edit CSS
Group =
Hidden = 0

[ApplyButton]
Meter = Shape
MeterStyle = ButtonStyle
X = 470
LeftMouseUpAction = !CommandMeasure "Script" "StartMod()"
Group = ApplyButton

[ApplyButtonText]
Meter = String
MeterStyle = ButtonTextStyle
Text = Apply
Group = ApplyButton

[ColorBoxStyle]
X = 25R
Y = r
Shape = Rectangle 0,0,120,35,8 | StrokeWidth 0 | Extend Color
Group = ColorBox

[TextStyle]
X = 25R
Y = r
W = 120
ClipstringW = 120
Clipstring = 2
StringAlign = LeftBottom
FontFace = Bahnschrift
FontSize = 13
FontWeight = 400
AntiAlias = 1
FontColor = 282828
Group = ColorBoxText

[ShadowStyle]
ImageName = #@#Shadow.png
X = 15R
Y = r

[Text1]
Meter = String
X = 30
Y = 110
MeterStyle = TextStyle

[Text2]
Meter = String
MeterStyle = TextStyle

[Text3]
Meter = String
MeterStyle = TextStyle

[Text4]
Meter = String
MeterStyle = TextStyle

[Shadow1]
Meter = Image
X = 25
Y = -8r
MeterStyle = ShadowStyle

[Shadow2]
Meter = Image
MeterStyle = ShadowStyle

[Shadow3]
Meter = Image
MeterStyle = ShadowStyle

[Shadow4]
Meter = Image
MeterStyle = ShadowStyle

[Box1]
Meter=Shape
X = 30
Y = 18r
MeterStyle = ColorBoxStyle

[Box2]
Meter=Shape
MeterStyle = ColorBoxStyle

[Box3]
Meter=Shape
MeterStyle = ColorBoxStyle

[Box4]
Meter=Shape
MeterStyle = ColorBoxStyle

[Text5]
Meter = String
X = 30
Y = 65R
MeterStyle = TextStyle

[Text6]
Meter = String
MeterStyle = TextStyle

[Text7]
Meter = String
MeterStyle = TextStyle

[Text8]
Meter = String
MeterStyle = TextStyle

[Shadow5]
Meter = Image
X = 25
Y = -8r
MeterStyle = ShadowStyle

[Shadow6]
Meter = Image
MeterStyle = ShadowStyle

[Shadow7]
Meter = Image
MeterStyle = ShadowStyle

[Shadow8]
Meter = Image
MeterStyle = ShadowStyle

[Box5]
Meter=Shape
X = 30
Y = 18r
MeterStyle = ColorBoxStyle

[Box6]
Meter=Shape
MeterStyle = ColorBoxStyle

[Box7]
Meter=Shape
MeterStyle = ColorBoxStyle

[Box8]
Meter=Shape
MeterStyle = ColorBoxStyle

[Text9]
Meter = String
X = 30
Y = 65R
MeterStyle = TextStyle

[Text10]
Meter = String
MeterStyle = TextStyle

[Text11]
Meter = String
MeterStyle = TextStyle

[Text12]
Meter = String
MeterStyle = TextStyle

[Shadow9]
Meter = Image
X = 25
Y = -8r
MeterStyle = ShadowStyle

[Shadow10]
Meter = Image
MeterStyle = ShadowStyle

[Shadow11]
Meter = Image
MeterStyle = ShadowStyle

[Shadow12]
Meter = Image
MeterStyle = ShadowStyle

[Box9]
Meter=Shape
X = 30
Y = 18r
MeterStyle = ColorBoxStyle

[Box10]
Meter=Shape
MeterStyle = ColorBoxStyle

[Box11]
Meter=Shape
MeterStyle = ColorBoxStyle

[Box12]
Meter=Shape
MeterStyle = ColorBoxStyle

[Text13]
Meter = String
X = 30
Y = 65R
MeterStyle = TextStyle

[Text14]
Meter = String
MeterStyle = TextStyle

[Text15]
Meter = String
MeterStyle = TextStyle

[Text16]
Meter = String
MeterStyle = TextStyle

[Shadow13]
Meter = Image
X = 25
Y = -8r
MeterStyle = ShadowStyle

[Shadow14]
Meter = Image
MeterStyle = ShadowStyle

[Shadow15]
Meter = Image
MeterStyle = ShadowStyle

[Shadow16]
Meter = Image
MeterStyle = ShadowStyle

[Box13]
Meter=Shape
X = 30
Y = 18r
MeterStyle = ColorBoxStyle

[Box14]
Meter=Shape
MeterStyle = ColorBoxStyle

[Box15]
Meter=Shape
MeterStyle = ColorBoxStyle

[Box16]
Meter=Shape
MeterStyle = ColorBoxStyle

[HideAdsMeasure]
Measure = Calc
IfCondition = #Hide_Ads# = 1
IfTrueAction = !SetOption HideAdsToggle Prefix "[\xf14a] Hide ads"
IfFalseAction = !SetOption HideAdsToggle Prefix "[\xf0c8] Hide ads"

[HideAdsToggle]
Meter = String
Text =
InlinePattern = ^(.)
InlineSetting = Face | Font Awesome 5 Free
FontFace = Bahnschrift
FOntSize = 13
FontColor = 282828
X = 30
Y = 510
AntiAlias = 1
LeftMouseUpAction = [!WriteKeyValue Variables Hide_Ads "(1 - #Hide_Ads#)"][!Refresh]

[InjectCSSMeasure]
Measure = Calc
IfCondition = #Inject_CSS# = 1
IfTrueAction = !SetOption InjectCSSToggle Prefix "[\xf14a] Inject CSS"
IfFalseAction = !SetOption InjectCSSToggle Prefix "[\xf0c8] Inject CSS"

[InjectCSSToggle]
Meter = String
MeterStyle = HideAdsToggle
Text =
X = 20R
LeftMouseUpAction = [!WriteKeyValue Variables Inject_CSS "(1 - #Inject_CSS#)"][!Refresh]

[PercentBar]
Meter=Shape
X = 30
Y = 545
Shape = Rectangle 0,0,560,4,2 | StrokeWidth 0 | Fill Color 50505050
Shape2 = Rectangle 0,0,(560*[Script:UpdatePercent()]),4,2 | StrokeWidth 0 | Fill Color 8a4fff
DynamicVariables = 1

[Status]
Meter = String
MeasureName = Script
FontFace = Source Sans Pro
FontWeight = 300
FOntSize = 15
X = 30
Y = 555
FontCOlor =505050
AntiAlias = 1
InlinePattern = Updating (.*)
InlineSetting = Weight | 500
InlinePattern2 = Unzipping (.*)
InlineSetting2 = Weight | 500
InlinePattern3 = Mod succeeded
InlineSetting3 = Weight | 500

[PopupClearBackup]
Meter = Shape
X = (170+67.5)
Y = 590
Shape = Rectangle -180,0,360,-125,5 | StrokeWidth 0 | Fill Color FF3030
Shape2 = Rectangle -10,0,20,20,3 | StrokeWidth 0 | Fill Color FF3030 | Rotate 45 | Offset 0,(-20/sqrt(2))
Group = PopupClearBackup
Hidden = 1

[PopupClearBackupIcon]
Meter = String
Text = [\xf057]
FontFace = Font Awesome 5 Free
FontSize = 40
X = -170r
Y = (590-57.5)
StringAlign = LeftCenter
AntiAlias = 1
FontColor = FFFFFF
Group = PopupClearBackup
Hidden = 1

[PopupClearBackupText]
Meter = String
Text = Before clearing backup and backing up again, make sure you have restored or re-installed Spotify to original state
FontFace = Bahnschrift
FontWeight = 400
FontSize = 13
StringAlign = LeftBottom
ClipStringW = 250
ClipString = 2
X = 10R
Y = 580
AntiAlias = 1
FontColor = FFFFFF
Group = PopupClearBackup
Hidden = 1


